<!doctype html>
<html lang="uk" xmlns:th="http://www.thymeleaf.org"
      th:with="appVersion=${@environment.getProperty('app.version')}">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Покупки клієнта</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="/web/css/app.css"
          th:href="@{/web/css/app.css(v=${appVersion})}"/>
</head>
<body>
<div th:replace="~{web/fragments/layout :: shell('accounts-client-purchases', ~{::main})}">
    <main class="page-surface">
        <section class="page-section" id="accountsWithClientsSection"
             data-data-endpoint="/api/accounts-with-clients/client-purchases/data"
             data-ai-endpoint="/api/ai/client-purchases/analyze">
            <h2>Покупки клієнта</h2>

              <div class="toolbar card">
                <div class="toolbar-grid">
                    <div class="field full-width dark-label">
                        <label for="contractor">Клієнт</label>
                        <div class="input-group combobox">
                            <input type="text" id="contractor" name="contractor" placeholder="усі клієнти" value=""
                                   role="combobox" aria-autocomplete="list" aria-expanded="false"
                                   aria-controls="contractorSuggestions" autocomplete="off"/>
                            <button type="button" class="btn-search" id="searchContractor" title="Знайти" aria-haspopup="listbox">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                    <path d="M21 21l-3.8-3.8M10.8 18.6a7.8 7.8 0 1 1 0-15.6 7.8 7.8 0 0 1 0 15.6Z"
                                          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </button>
                            <div class="combo-dropdown is-hidden" id="contractorSuggestions" role="listbox"
                                 aria-label="Результати пошуку клієнтів"></div>
                        </div>
                    </div>
                </div>

                <div class="toolbar-actions">
                    <button type="button" class="btn primary" id="getBtn">Отримати</button>
                </div>
            </div>

              <div id="analysisSection" class="card is-hidden">
                <div class="toolbar-actions">
                    <button type="button" class="btn secondary" id="analysisButton">Проаналізувати [AI]</button>
                </div>
                <div id="analysisLoading" class="status is-hidden">Аналізую…</div>
                <div id="analysisError" class="status error is-hidden"></div>
                <div id="analysisResult" class="report-text-block is-hidden"></div>
            </div>

              <div class="zoombar card compact is-hidden" id="zoombar">
                <div class="zoom-group">
                    <button class="btn-zoom" id="zoomOut" aria-label="Зменшити масштаб">−</button>
                    <span class="zoom-label" id="zoomLabel">60%</span>
                    <button class="btn-zoom" id="zoomIn" aria-label="Збільшити масштаб">+</button>
                </div>
                <button class="btn-zoom btn-zoom-reset" id="zoomReset" title="Скинути масштаб" aria-label="Скинути масштаб">
                    <span>Скинути</span>
                </button>
            </div>

            <div id="loading" class="status is-hidden">Отримую дані…</div>
              <div id="tableContainer" class="table-container is-hidden"></div>
            <div id="error" class="status error is-hidden"></div>
        </section>
    </main>
</div>

  <script src="/web/js/app.js" defer
          th:src="@{/web/js/app.js(v=${appVersion})}"></script>
<script src="/web/js/general-one-s.js"
        th:src="@{/web/js/general-one-s.js(v=${appVersion})}"></script>
</body>
</html>
