<!doctype html>
<html
  lang="uk"
  xmlns:th="http://www.thymeleaf.org"
  th:with="appVersion=${@environment.getProperty('app.version')}"
>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1"
    />
    <title>Запуск Bulat+</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link
      rel="stylesheet"
      th:href="@{/css/app.css(v=${appVersion})}"
    />
    <link
      rel="stylesheet"
      th:href="@{/pages/auth-gateway/auth-gateway.css(v=${appVersion})}"
    />
  </head>
  <body class="auth-gateway">
    <div class="app-shell--auth">
      <header class="gateway-header">
        <h1 class="gateway-title">Bulat+</h1>
      </header>
      <main class="gateway-main">
        <div class="gateway-card">
          <div
            class="loader"
            id="authLoader"
            aria-hidden="true"
          ></div>
          <div class="auth-gateway__card-inner">
            <p
              class="auth-gateway__status"
              id="authMessage"
            >
              Перевіряємо ваш доступ…
            </p>

            <button
              class="btn secondary is-hidden"
              id="retryButton"
              type="button"
            >
              Спробувати ще раз
            </button>

            <div
              class="telegram-login is-hidden"
              id="telegramWidgetContainer"
              aria-live="polite"
              th:attr="data-bot=${telegramBotUsername}"
            ></div>

            <p
              class="gateway-hint is-hidden"
              id="browserHint"
            ></p>
          </div>
          <div class="gateway-actions">
            <!-- <div
              class="telegram-login is-hidden"
              id="telegramWidgetContainer"
              aria-live="polite"
              th:attr="data-bot=${telegramBotUsername}"
            ></div>

            <p
              class="gateway-hint is-hidden"
              id="browserHint"
            ></p> -->
          </div>
        </div>
      </main>
      <footer class="gateway-footer">
        <small
          >Якщо ви ще не підтвердили авториацію у Telegram, зробіть це
          зараз.</small
        >
      </footer>
    </div>

    <script th:inline="javascript">
      window.__APP_CONTEXT__ = Object.assign(
        {},
        window.__APP_CONTEXT__ || {},
        {
          authenticated: /*[[${authenticated}]]*/ false,
        },
      );

      // Виправлення позиціонування для Telegram WebApp
      (function () {
        const body = document.body;
        const html = document.documentElement;

        // Обнуляємо всі можливі відступи
        body.style.margin = "0";
        body.style.padding = "0";
        body.style.width = "100%";
        body.style.overflow = "hidden";

        html.style.margin = "0";
        html.style.padding = "0";
        html.style.width = "100%";
      })();
    </script>

    <script
      type="module"
      th:src="@{/pages/auth-gateway/js/main.js(v=${appVersion})}"
    ></script>
  </body>
</html>
