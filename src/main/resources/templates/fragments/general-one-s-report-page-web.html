<!doctype html>
<html lang="uk" xmlns:th="http://www.thymeleaf.org"
      th:fragment="page(pageTitle, pageHeading, dataEndpoint, exportEndpoint, renderDatePicker, renderClientPicker, activeNav)"
      th:with="appVersion=${@environment.getProperty('app.version')}">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title th:text="${pageTitle}"></title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link
            rel="stylesheet"
            href="/css/web-app.css"
    />
</head>
<body>
<div th:replace="~{fragments/layout :: shell(${activeNav}, ~{::main})}">
    <main class="page-surface">
        <section class="page-section" id="accountsWithClientsSection"
             th:attr="data-data-endpoint=${dataEndpoint},data-export-endpoint=${exportEndpoint}">
            <h2 th:text="${pageHeading}"></h2>

              <div class="toolbar card">
                <div class="toolbar-grid" th:if="${renderDatePicker or renderClientPicker}">
                    <div class="range-field" th:if="${renderDatePicker}">
                        <div class="field dark-label condensed">
                            <label for="dateFrom">Початок</label>
                            <input type="date" id="dateFrom" name="from"/>
                        </div>
                        <span class="range-separator" aria-hidden="true"></span>
                        <div class="field dark-label condensed">
                            <label for="dateTo">Кінець</label>
                            <input type="date" id="dateTo" name="to"/>
                        </div>
                    </div>

                    <div class="field full-width dark-label" th:if="${renderClientPicker}">
                        <label for="contractor">Клієнт</label>
                        <div class="input-group combobox">
                            <input type="text" id="contractor" name="contractor" placeholder="усі клієнти" value=""
                                   role="combobox" aria-autocomplete="list" aria-expanded="false"
                                   aria-controls="contractorSuggestions" autocomplete="off"/>
                            <button type="button" class="btn-search" id="searchContractor" title="Знайти" aria-haspopup="listbox">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                    <path d="M21 21l-3.8-3.8M10.8 18.6a7.8 7.8 0 1 1 0-15.6 7.8 7.8 0 0 1 0 15.6Z"
                                          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </button>
                            <div class="combo-dropdown is-hidden" id="contractorSuggestions" role="listbox"
                                 aria-label="Результати пошуку клієнтів"></div>
                        </div>
                    </div>
                </div>

                <div class="toolbar-actions toolbar-actions--inline-compact">
                    <button type="button" class="btn primary" id="getBtn">Отримати звіт</button>
                    <button type="button" class="btn accent is-hidden" id="downloadBtn"
                            th:if="${exportEndpoint != null}">Завантажити</button>
                </div>
            </div>

              <div class="zoombar card compact is-hidden" id="zoombar">
                <div class="zoom-group">
                    <button class="btn-zoom" id="zoomOut" aria-label="Зменшити масштаб">−</button>
                    <span class="zoom-label" id="zoomLabel">100%</span>
                    <button class="btn-zoom" id="zoomIn" aria-label="Збільшити масштаб">+</button>
                </div>
                <button class="btn-zoom btn-zoom-reset" id="zoomReset" title="Скинути масштаб" aria-label="Скинути масштаб">
                    <span>Скинути</span>
                </button>
            </div>

            <div id="loading" class="status is-hidden">Отримую дані…</div>
            <div id="tableContainer" class="table-container card tight table-container--flush is-hidden"></div>
            <div id="error" class="status error is-hidden"></div>
        </section>
    </main>
</div>

<script src="/js/app.js"></script>

</body>
</html>
